<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Documento sin título</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400&display=swap"
      rel="stylesheet"
    />
    <link href="styles.css" rel="stylesheet" type="text/css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
      charset="utf-8"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"
      charset="utf-8"
    ></script>
  </head>

  <body>
    <div id="Macetas" class="puzzle">
      <div class="puzzleshow">
        <p class="close">&times;</p>
        <!-- container -->
        <div class="container">
          <div class="main-canvas">
            <div class="bckp1"></div>
            <div class="bckp2"></div>
            <div class="bckp3"></div>
            <div class="bckp4"></div>

            <div id="planta1m" class="box box1">
              <img src="images/planta1.png" alt="" />
            </div>
            <div id="planta2m" class="box box2">
              <img src="images/planta2.png" alt="" />
            </div>
            <div id="planta3m" class="box box3">
              <img src="images/planta3.png" alt="" />
            </div>
            <div id="planta4m" class="box box4">
              <img src="images/planta4.png" alt="" />
            </div>
          </div>
        </div>
        <!-- container -->
      </div>
    </div>

    <div id="fondo">
      <div id="content" class="pantalla2">
        <div class="textos">Se necesita médico en neonatología.</div>
        <button class="help" id="myBtn">
          <img src="images/help.png" alt="" />
        </button>

        <div class="panel">
          <div class="marco objeto1 col1" id="myObj"></div>
          <div class="marco objeto2 col2"></div>

          <div class="marco objeto3 col1"></div>
          <div class="marco objeto4 col2"></div>

          <div class="marco objeto5 col1"></div>
          <div class="marco objeto6 col2"></div>

          <div class="marco objeto7 col1"></div>
          <div class="marco objeto8 col2"></div>
        </div>

        <div id="matafuego" class="objeto">
          <button id="Objshow">
            <img src="images/matafuego.png" width="96" height="216" alt="" />
          </button>
        </div>

        <div id="cuadro1" class="objeto">
          <button id="Objshow1"><img src="images/cuadro1.png" alt="" /></button>
        </div>

        <div id="cuadro2" class="objeto">
          <button id="Objshow2"><img src="images/cuadro2.png" alt="" /></button>
        </div>

        <div id="cuadro3" class="objeto">
          <button id="Objshow3"><img src="images/cuadro3.png" alt="" /></button>
        </div>

        <div id="cartel" class="objeto">
          <button id="Objshow4"><img src="images/cartel.png" alt="" /></button>
        </div>

        <div id="planta1" class="objeto">
          <button id="myMacetas">
            <img src="images/planta1.png" alt="" />
          </button>
        </div>

        <div id="planta2" class="objeto">
          <button id=""><img src="images/planta2.png" alt="" /></button>
        </div>

        <div id="planta3" class="objeto">
          <button id=""><img src="images/planta3.png" alt="" /></button>
        </div>

        <div id="planta4" class="objeto">
          <button id=""><img src="images/planta4.png" alt="" /></button>
        </div>

        <div id="cajonp2" class="objeto">
          <button
            id=""
            role="link"
            onclick="window.location='pantalla2_cajon_cerrado.html'"
          >
            <img src="images/transparente.png" alt="" />
          </button>
        </div>

        <div id="flechap2" class="objeto">
          <button
            id=""
            role="link"
            onclick="window.location='pantalla2_puerta.html'"
          >
            <img src="images/flecha.png" alt="" />
          </button>
        </div>

        <div id="planta1OK" class="objeto"></div>
        <div id="planta2OK" class="objeto"></div>
        <div id="planta3OK" class="objeto"></div>
        <div id="planta4OK" class="objeto"></div>
      </div>
    </div>

    <script>
      var puzzle = document.getElementById("Macetas");

      var btn = document.getElementById("myMacetas");

      var span = document.getElementsByClassName("close")[0];

      btn.onclick = function () {
        puzzle.style.display = "block";
        fondo.style.filter = "blur(2px)";
      };

      span.onclick = function () {
        puzzle.style.display = "none";
        fondo.style.filter = "none";
      };

      var modal = document.getElementById("myModal");

      var btn = document.getElementById("myBtn");

      var span = document.getElementsByClassName("close")[0];
      var span = document.getElementsByClassName("modal")[0];

      btn.onclick = function () {
        modal.style.display = "block";
      };

      span.onclick = function () {
        modal.style.display = "none";
      };

      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };

      var modalobj = document.getElementById("myObjet");

      var obj = document.getElementById("myObj");

      var cierro = document.getElementsByClassName("cerrar")[0];
      var cierro = document.getElementsByClassName("modobj")[0];

      obj.onclick = function () {
        myObjet.style.display = "block";
        fondo.style.filter = "blur(2px)";
      };

      cierro.onclick = function () {
        myObjet.style.display = "none";
        fondo.style.filter = "none";
      };

      window.onclick = function (event) {
        if (event.target == modobj) {
          myObjet.style.display = "none";
        }
      };

      var modalobj = document.getElementById("objetshow");

      var obj = document.getElementById("Objshow");
      var cierro = document.getElementsByClassName("cerrar")[0];
      var cierro = document.getElementsByClassName("Objeshow")[0];
      obj.onclick = function () {
        objetshow.style.display = "block";
        fondo.style.filter = "blur(4px)";
      };
      cierro.onclick = function () {
        objetshow.style.display = "none";
        fondo.style.filter = "none";
      };

      window.onclick = function (event) {
        if (event.target == Objeshow) {
          objetshow.style.display = "none";
        }
      };

      var modalobj = document.getElementById("objetshow1");

      var obj = document.getElementById("Objshow1");
      var cierro = document.getElementsByClassName("cerrar")[0];
      var cierro = document.getElementsByClassName("Objeshow1")[0];
      obj.onclick = function () {
        objetshow1.style.display = "block";
        fondo.style.filter = "blur(4px)";
      };
      cierro.onclick = function () {
        objetshow1.style.display = "none";
        fondo.style.filter = "none";
      };

      window.onclick = function (event) {
        if (event.target == Objeshow1) {
          objetshow1.style.display = "none";
        }
      };

      var modalobj = document.getElementById("objetshow2");

      var obj = document.getElementById("Objshow2");
      var cierro = document.getElementsByClassName("cerrar")[0];
      var cierro = document.getElementsByClassName("Objeshow2")[0];
      obj.onclick = function () {
        objetshow2.style.display = "block";
        fondo.style.filter = "blur(4px)";
      };
      cierro.onclick = function () {
        objetshow2.style.display = "none";
        fondo.style.filter = "none";
      };

      window.onclick = function (event) {
        if (event.target == Objeshow2) {
          objetshow2.style.display = "none";
        }
      };
      var modalobj = document.getElementById("objetshow3");

      var obj = document.getElementById("Objshow3");
      var cierro = document.getElementsByClassName("cerrar")[0];
      var cierro = document.getElementsByClassName("Objeshow3")[0];
      obj.onclick = function () {
        objetshow3.style.display = "block";
        fondo.style.filter = "blur(4px)";
      };
      cierro.onclick = function () {
        objetshow3.style.display = "none";
        fondo.style.filter = "none";
      };

      window.onclick = function (event) {
        if (event.target == Objeshow3) {
          objetshow3.style.display = "none";
        }
      };
      var modalobj = document.getElementById("objetshow4");

      var obj = document.getElementById("Objshow4");
      var cierro = document.getElementsByClassName("cerrar")[0];
      var cierro = document.getElementsByClassName("Objeshow4")[0];
      obj.onclick = function () {
        objetshow4.style.display = "block";
        fondo.style.filter = "blur(4px)";
      };
      cierro.onclick = function () {
        objetshow4.style.display = "none";
        fondo.style.filter = "none";
      };

      window.onclick = function (event) {
        if (event.target == Objeshow4) {
          objetshow4.style.display = "none";
        }
      };
    </script>

    <script type="text/javascript">
      $(document).ready(function () {
        var box = $(".box");
        var mainCanvas = $(".main-canvas");

        box.draggable({
          containment: mainCanvas,
          helper: "clone",

          start: function () {
            $(this).css({
              opacity: 0,
            });

            $(".box").css("z-index", "0");
          },

          stop: function () {
            $(this).css({
              opacity: 1,
            });
          },
        });

        box.droppable({
          accept: box,

          drop: function (event, ui) {
            var draggable = ui.draggable;
            var droppable = $(this);
            var dragPos = draggable.position();
            var dropPos = droppable.position();

            draggable.css({
              left: dropPos.left + "px",
              top: dropPos.top + "px",
              "z-index": 20,
            });

            droppable.css("z-index", 10).animate({
              left: dragPos.left,
              top: dragPos.top,
            });

            let plantasArray = [];

            setTimeout(function () {
              $(".box").each(function () {
                let id = $(this).attr("id");
                if (id) {
                  let obj = {
                    nombre: id,
                    left: $(this).css("left"),
                    top: $(this).css("top"),
                  };
                  plantasArray.push(obj);
                }
              });

              let ordenado = plantasArray.sort((a, b) => {
                if (a.top < b.top) return -1;
                if (a.top > b.top) return 1;
                else {
                  if (a.left < b.left) return -1;
                  if (a.left > b.left) return 1;
                }
                return 0;
              });

              console.log(ordenado);
            }, 500);
          },
        });
      });
    </script>
  </body>
</html>
